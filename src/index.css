/* src/index.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --color-bg: 246 248 251;

  /* frosted card */
  --color-card: 255 255 255 / 0.72;

  --color-fg: 15 23 42;
  --color-muted: 100 116 139;

  --grid: 15 23 42 / 0.10;

  --tooltip-bg: 255 255 255 / 0.92;
  --tooltip-border: 15 23 42 / 0.12;
}

.dark {
  --color-bg: 2 6 23;

  /* bluish iOS glass */
  --color-card: 18 32 50 / 0.46;

  --color-fg: 235 243 255;
  --color-muted: 155 173 199;

  --grid: 255 255 255 / 0.10;

  --tooltip-bg: 15 23 42 / 0.72;
  --tooltip-border: 255 255 255 / 0.12;

  color-scheme: dark;
}

html,
body,
#root {
  height: 100%;
}

@layer base {
  html {
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display",
      "SF Pro Text", system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
  }

  body {
    color: rgb(var(--color-fg));
    background-color: rgb(var(--color-bg));
    overflow-x: hidden;
    position: relative;
  }
}

/* ---------- iOS Weather (Rainy Night) Scene ---------- */

/* Base “night” gradient (more blue-gray, less purple) */
.dark body {
  background-color: rgb(2 6 23);
  background-image:
    radial-gradient(
      1200px 820px at 50% -14%,
      rgba(140, 220, 255, 0.22),
      transparent 62%
    ),
    radial-gradient(
      900px 680px at 12% 26%,
      rgba(95, 160, 255, 0.14),
      transparent 66%
    ),
    radial-gradient(
      1000px 760px at 88% 18%,
      rgba(80, 150, 255, 0.12),
      transparent 64%
    ),
    linear-gradient(to bottom, rgba(2, 6, 23, 0.72), rgba(2, 6, 23, 0.98));
}

/* Cloud / fog texture (behind content) */
body::before {
  content: "";
  position: fixed;
  inset: -18%;
  pointer-events: none;
  z-index: 0;
  opacity: 0;
  transform: translate3d(0, 0, 0);

  background-image:
    url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='800'%20height='800'%3E%3Cfilter%20id='n'%3E%3CfeTurbulence%20type='fractalNoise'%20baseFrequency='0.012'%20numOctaves='3'%20stitchTiles='stitch'/%3E%3C/filter%3E%3Crect%20width='800'%20height='800'%20filter='url(%23n)'%20opacity='0.55'/%3E%3C/svg%3E"),
    radial-gradient(900px 360px at 18% 6%, rgba(255,255,255,0.16), transparent 70%),
    radial-gradient(900px 420px at 68% 2%, rgba(255,255,255,0.12), transparent 72%),
    radial-gradient(1000px 520px at 50% 26%, rgba(255,255,255,0.10), transparent 72%);
  background-size: 700px 700px, auto, auto, auto;
  background-position: 0 0, center, center, center;
  filter: blur(26px);
  mix-blend-mode: screen;
  animation: wa-clouds 26s ease-in-out infinite alternate;
}

.dark body::before {
  opacity: 0.78;
}

/* Vignette (above everything) */
body::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 40;
  opacity: 0;

  background-image:
    radial-gradient(
      120% 80% at 50% 0%,
      rgba(0, 0, 0, 0.00),
      rgba(0, 0, 0, 0.62) 72%
    ),
    radial-gradient(
      120% 80% at 50% 100%,
      rgba(0, 0, 0, 0.10),
      rgba(0, 0, 0, 0.72) 72%
    );
}

.dark body::after {
  opacity: 0.72;
}

#root {
  position: relative;
  z-index: 0;
}

/* Content wrapper must be above clouds */
.wa-app {
  position: relative;
  z-index: 10;
}

/* Rain streaks (foreground over content) */
#root::before {
  content: "";
  position: fixed;
  inset: -20%;
  pointer-events: none;
  z-index: 30;
  opacity: 0;
  transform: translate3d(0, 0, 0);

  background-image:
    repeating-linear-gradient(
      105deg,
      rgba(255, 255, 255, 0.20) 0px,
      rgba(255, 255, 255, 0.20) 1px,
      transparent 1px,
      transparent 14px
    ),
    repeating-linear-gradient(
      112deg,
      rgba(255, 255, 255, 0.12) 0px,
      rgba(255, 255, 255, 0.12) 1px,
      transparent 1px,
      transparent 22px
    );
  background-size: 280px 280px, 360px 360px;
  filter: blur(0.2px);
  mix-blend-mode: screen;
  animation: wa-rain 6.2s linear infinite;
}

.dark #root::before {
  opacity: 0.16; /* 10–15% + etwas durch Blend */
}

/* Extra subtle droplets/specks over cards/text */
#root::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 31;
  opacity: 0;

  background-image:
    radial-gradient(circle at 18% 22%, rgba(255,255,255,0.12) 0 1px, transparent 2px),
    radial-gradient(circle at 72% 38%, rgba(255,255,255,0.10) 0 1px, transparent 2px),
    radial-gradient(circle at 44% 76%, rgba(255,255,255,0.08) 0 1px, transparent 2px);
  background-size: 220px 220px, 280px 280px, 360px 360px;
  background-position: 0 0, 60px 40px, -40px 80px;
  mix-blend-mode: overlay;
}

.dark #root::after {
  opacity: 0.10;
}

@keyframes wa-rain {
  from {
    transform: translate3d(-2%, -10%, 0);
  }
  to {
    transform: translate3d(2%, 10%, 0);
  }
}

@keyframes wa-clouds {
  from {
    transform: translate3d(-1.5%, -0.8%, 0) scale(1.02);
  }
  to {
    transform: translate3d(1.5%, 0.8%, 0) scale(1.02);
  }
}

@media (prefers-reduced-motion: reduce) {
  body::before,
  #root::before {
    animation: none;
  }
}

/* Card surface: condensation / droplets (on cards) */
.wa-card-surface {
  position: absolute;
  inset: 0;
  pointer-events: none;

  background-image:
    radial-gradient(circle at 22% 18%, rgba(255,255,255,0.14) 0 1px, transparent 2px),
    radial-gradient(circle at 68% 28%, rgba(255,255,255,0.10) 0 1px, transparent 2px),
    radial-gradient(circle at 38% 62%, rgba(255,255,255,0.08) 0 1px, transparent 2px),
    radial-gradient(circle at 78% 78%, rgba(255,255,255,0.07) 0 1px, transparent 2px);
  background-size: 220px 220px, 300px 300px, 360px 360px, 420px 420px;
  background-position: 0 0, 80px 30px, -60px 90px, 40px -40px;

  opacity: 0.10;
  filter: blur(0.1px);
  mix-blend-mode: soft-light;
}

.dark .wa-card-surface {
  opacity: 0.18;
}

/* Optional safe-area helpers */
.safe-top {
  padding-top: env(safe-area-inset-top);
}
.safe-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}