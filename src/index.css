@tailwind base;
@tailwind components;
@tailwind utilities;

/* Theme tokens (werden u.a. von recharts-Tooltip/Grid genutzt) */
:root {
  --color-bg: 246 248 251;

  /* frosted glass card */
  --color-card: 255 255 255 / 0.72;

  --color-fg: 15 23 42;
  --color-muted: 100 116 139;

  /* chart/grid/border */
  --grid: 15 23 42 / 0.10;

  /* tooltip */
  --tooltip-bg: 255 255 255 / 0.92;
  --tooltip-border: 15 23 42 / 0.12;
}

.dark {
  --color-bg: 2 6 23;
  --color-card: 255 255 255 / 0.10;

  --color-fg: 229 231 235;
  --color-muted: 148 163 184;

  --grid: 255 255 255 / 0.12;

  --tooltip-bg: 15 23 42 / 0.72;
  --tooltip-border: 255 255 255 / 0.12;

  color-scheme: dark;
}

html,
body,
#root {
  height: 100%;
}

@layer base {
  html {
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display",
      "SF Pro Text", system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
  }

  body {
    color: rgb(var(--color-fg));
    background-color: rgb(var(--color-bg));
    overflow-x: hidden;
    position: relative;
  }
}

/* ---------- Background: iOS Weather (Rainy Night) ---------- */

/* Clouds / depth background */
body {
  background-image:
    radial-gradient(
      900px 650px at 20% -10%,
      rgba(56, 189, 248, 0.10),
      transparent 60%
    ),
    radial-gradient(
      900px 650px at 80% 0%,
      rgba(168, 85, 247, 0.08),
      transparent 60%
    ),
    radial-gradient(
      900px 650px at 50% 110%,
      rgba(14, 165, 233, 0.06),
      transparent 55%
    ),
    linear-gradient(to bottom, rgba(240, 249, 255, 0.85), rgba(226, 232, 240, 0.95));
}

.dark body {
  background-image:
    radial-gradient(
      1100px 700px at 20% -10%,
      rgba(56, 189, 248, 0.18),
      transparent 60%
    ),
    radial-gradient(
      1000px 650px at 80% 0%,
      rgba(168, 85, 247, 0.18),
      transparent 60%
    ),
    radial-gradient(
      1000px 650px at 50% 110%,
      rgba(14, 165, 233, 0.12),
      transparent 55%
    ),
    linear-gradient(to bottom, rgba(3, 7, 18, 0.70), rgba(3, 7, 18, 0.95));
}

/* Rain layer (subtle, animated). Enabled mainly in dark mode. */
body::before {
  content: "";
  position: fixed;
  inset: -20%;
  pointer-events: none;
  z-index: 0;

  background-image: repeating-linear-gradient(
    105deg,
    rgba(255, 255, 255, 0.12) 0px,
    rgba(255, 255, 255, 0.12) 1px,
    transparent 1px,
    transparent 12px
  );
  background-size: 240px 240px;
  opacity: 0; /* off in light mode */
  transform: translate3d(0, 0, 0);
  animation: wa-rain 7s linear infinite;
}

.dark body::before {
  opacity: 0.12; /* 10â€“15% iOS-like */
}

/* Vignette layer (top/bottom). */
body::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1;

  background-image:
    radial-gradient(
      120% 80% at 50% 0%,
      rgba(0, 0, 0, 0.00),
      rgba(0, 0, 0, 0.55) 70%
    ),
    radial-gradient(
      120% 80% at 50% 100%,
      rgba(0, 0, 0, 0.10),
      rgba(0, 0, 0, 0.65) 70%
    );
  opacity: 0; /* off in light mode */
}

.dark body::after {
  opacity: 0.72;
}

/* Ensure UI sits above background layers */
#root {
  position: relative;
  z-index: 2;
}

@keyframes wa-rain {
  from {
    transform: translate3d(-2%, -10%, 0);
  }
  to {
    transform: translate3d(2%, 10%, 0);
  }
}

@media (prefers-reduced-motion: reduce) {
  body::before {
    animation: none;
  }
}

/* Optional safe-area helpers */
.safe-top {
  padding-top: env(safe-area-inset-top);
}
.safe-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}